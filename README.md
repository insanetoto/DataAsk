# ç™¾æƒŸæ•°é—® - æ™ºèƒ½æ•°æ®é—®ç­”å¹³å°

[![Python Version](https://img.shields.io/badge/python-3.8+-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/platform-linux%20%7C%20windows%20%7C%20macos-lightgrey.svg)](https://github.com)

åŸºäºAIçš„ä¼ä¸šçº§æ™ºèƒ½æ•°æ®é—®ç­”å¹³å°ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æŸ¥è¯¢æ•°æ®åº“ï¼Œè‡ªåŠ¨ç”ŸæˆSQLå¹¶æ‰§è¡ŒæŸ¥è¯¢ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¤– æ™ºèƒ½é—®ç­”
- ğŸ—£ï¸ **è‡ªç„¶è¯­è¨€äº¤äº’**ï¼šæ”¯æŒä¸­æ–‡è‡ªç„¶è¯­è¨€æŸ¥è¯¢
- ğŸ”„ **è‡ªåŠ¨SQLç”Ÿæˆ**ï¼šAIæ™ºèƒ½å°†é—®é¢˜è½¬æ¢ä¸ºSQLè¯­å¥
- ğŸ“Š **å³æ—¶æŸ¥è¯¢æ‰§è¡Œ**ï¼šè‡ªåŠ¨æ‰§è¡Œç”Ÿæˆçš„SQLå¹¶è¿”å›ç»“æœ
- ğŸ¯ **é«˜ç²¾åº¦è¯†åˆ«**ï¼šåŸºäºå‘é‡ç›¸ä¼¼åº¦çš„æ™ºèƒ½åŒ¹é…

### ğŸ“ æ¨¡å‹è®­ç»ƒ
- ğŸ“š **çŸ¥è¯†åº“æ„å»º**ï¼šæ”¯æŒæ•°æ®åº“Schemaè‡ªåŠ¨å­¦ä¹ 
- ğŸ”§ **è‡ªå®šä¹‰è®­ç»ƒ**ï¼šæ”¯æŒé—®é¢˜-SQLå¯¹è‡ªå®šä¹‰è®­ç»ƒ
- ğŸ“– **æ–‡æ¡£è®­ç»ƒ**ï¼šæ”¯æŒä¸šåŠ¡æ–‡æ¡£å’ŒDDLè¯­å¥è®­ç»ƒ
- ğŸš€ **å¢é‡å­¦ä¹ **ï¼šæŒç»­ä¼˜åŒ–æ¨¡å‹å‡†ç¡®æ€§

### ğŸ”’ Licenseæˆæƒç³»ç»Ÿ
- ğŸ¢ **æœºæ„æˆæƒç®¡ç†**ï¼šæ”¯æŒæœºæ„åç§°ã€æ—¶é—´ã€ç”¨æˆ·æ•°é™åˆ¶
- ğŸ›¡ï¸ **åŠŸèƒ½æƒé™æ§åˆ¶**ï¼šç»†ç²’åº¦åŠŸèƒ½ç‰¹æ€§æ§åˆ¶
- â° **æ—¶é—´éªŒè¯**ï¼šè‡ªåŠ¨æ£€æŸ¥Licenseè¿‡æœŸçŠ¶æ€
- ğŸ” **å¼ºåŠ å¯†ä¿æŠ¤**ï¼šPBKDF2+FernetåŒé‡åŠ å¯†

### ğŸš€ é«˜æ€§èƒ½æ¶æ„
- âš¡ **Redisç¼“å­˜**ï¼šæ™ºèƒ½ç¼“å­˜æå‡å“åº”é€Ÿåº¦
- ğŸ”„ **è¿æ¥æ± ç®¡ç†**ï¼šæ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–
- ğŸ“ˆ **è´Ÿè½½å‡è¡¡**ï¼šæ”¯æŒå¤šå®ä¾‹éƒ¨ç½²
- ğŸ“Š **ç›‘æ§æ—¥å¿—**ï¼šå®Œå–„çš„æ—¥å¿—å’Œç›‘æ§ä½“ç³»

### ğŸ¨ ç°ä»£åŒ–ç•Œé¢
- ğŸ“‹ **APIæ–‡æ¡£**ï¼šSwaggeré£æ ¼çš„æ¥å£æ–‡æ¡£
- ğŸ”§ **åœ¨çº¿æµ‹è¯•**ï¼šæ”¯æŒæ¥å£åœ¨çº¿è°ƒè¯•
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šé€‚é…å¤šç§è®¾å¤‡å±å¹•
- ğŸ¯ **ç”¨æˆ·å‹å¥½**ï¼šç›´è§‚çš„æ“ä½œç•Œé¢

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ç•Œé¢      â”‚    â”‚   Flask API     â”‚    â”‚   AIæ¨¡å‹æœåŠ¡    â”‚
â”‚  (HTML/JS)     â”‚â—„â”€â”€â–ºâ”‚   (REST API)    â”‚â—„â”€â”€â–ºâ”‚  (Vanna AI)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚                         â”‚
                              â–¼                         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Redisç¼“å­˜     â”‚    â”‚   å‘é‡æ•°æ®åº“    â”‚
                    â”‚   (æŸ¥è¯¢ç¼“å­˜)    â”‚    â”‚  (ChromaDB)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   MySQLæ•°æ®åº“   â”‚
                    â”‚   (ä¸šåŠ¡æ•°æ®)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **ğŸ åç«¯æ¡†æ¶**ï¼šFlask + Python 3.8+
- **ğŸ¤– AIæ¨¡å‹**ï¼šVanna AI + é˜¿é‡Œäº‘ç™¾ç‚¼(Qwen)
- **ğŸ’¾ æ•°æ®åº“**ï¼šMySQL 8.0+
- **ğŸš€ ç¼“å­˜**ï¼šRedis 6.0+
- **ğŸ” å‘é‡å­˜å‚¨**ï¼šChromaDB
- **ğŸ” å®‰å…¨**ï¼šcryptography + PBKDF2

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

æ”¯æŒ Ubuntu 20.04+ å’Œ CentOS 7+ ç³»ç»Ÿï¼š

```bash
# ä¸‹è½½éƒ¨ç½²è„šæœ¬
wget https://raw.githubusercontent.com/insanetoto/DataAsk/main/deploy.sh

# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy.sh

# æ‰§è¡Œä¸€é”®éƒ¨ç½²ï¼ˆéœ€è¦rootæƒé™ï¼‰
sudo ./deploy.sh --repo https://github.com/insanetoto/DataAsk.git
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…

#### 1. ç¯å¢ƒè¦æ±‚
- Python 3.8+
- MySQL 8.0+
- Redis 6.0+
- 4GB+ å†…å­˜

#### 2. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/insanetoto/DataAsk.git
cd DataAsk
```

#### 3. å®‰è£…ä¾èµ–
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ– venv\Scripts\activate  # Windows

# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt
```

#### 4. é…ç½®ç¯å¢ƒ
```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶
cp env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®æ•°æ®åº“å’ŒAPIå¯†é’¥
vim .env
```

#### 5. æ•°æ®åº“è®¾ç½®
```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE llmstudy CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- åˆ›å»ºç”¨æˆ·
CREATE USER 'dataask'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON llmstudy.* TO 'dataask'@'localhost';
FLUSH PRIVILEGES;
```

#### 6. å¯åŠ¨åº”ç”¨
```bash
python app.py
```

åº”ç”¨å°†è¿è¡Œåœ¨ `http://localhost:8080`

## ğŸ”‘ Licenseç®¡ç†

### ç”ŸæˆLicense
Licenseç®¡ç†å·¥å…·éœ€è¦å•ç‹¬æä¾›ï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š
- ç”ŸæˆåŠ å¯†çš„Licenseæ–‡ä»¶
- éªŒè¯Licenseæœ‰æ•ˆæ€§å’Œè¿‡æœŸæ—¶é—´
- æŸ¥çœ‹Licenseè¯¦ç»†ä¿¡æ¯
- æ”¯æŒæœºæ„åç§°ã€ç”¨æˆ·æ•°é‡ã€åŠŸèƒ½æƒé™æ§åˆ¶

è¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…è·å–Licenseç®¡ç†å·¥å…·ã€‚

### LicenseåŠŸèƒ½æ§åˆ¶
- `ai_query`: æ™ºèƒ½é—®ç­”åŠŸèƒ½
- `sql_generation`: SQLç”ŸæˆåŠŸèƒ½  
- `data_visualization`: æ•°æ®å¯è§†åŒ–
- `cache_enabled`: ç¼“å­˜åŠŸèƒ½
- `training_enabled`: æ¨¡å‹è®­ç»ƒåŠŸèƒ½

## ğŸ“¡ APIæ¥å£

### æ ¸å¿ƒæ¥å£

#### ğŸ¤– æ™ºèƒ½é—®ç­”
```bash
POST /api/v1/ask
Content-Type: application/json

{
  "question": "æŸ¥è¯¢å®¢æˆ·æ€»æ•°"
}
```

#### ğŸ”§ ç”ŸæˆSQL
```bash
POST /api/v1/generate_sql
Content-Type: application/json

{
  "question": "ç»Ÿè®¡å„éƒ¨é—¨å‘˜å·¥æ•°é‡"
}
```

#### ğŸ“ æ¨¡å‹è®­ç»ƒ
```bash
POST /api/v1/train
Content-Type: application/json

{
  "question": "æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯",
  "sql": "SELECT * FROM users"
}
```

### ç³»ç»Ÿç®¡ç†

#### ğŸ” å¥åº·æ£€æŸ¥
```bash
GET /api/v1/health
```

#### ğŸ” LicenseçŠ¶æ€
```bash
GET /api/v1/license/status
```

å®Œæ•´APIæ–‡æ¡£è¯·è®¿é—®ï¼š`http://localhost:8080`

## ğŸ› ï¸ éƒ¨ç½²é…ç½®

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### ä½¿ç”¨Nginxåå‘ä»£ç†
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

#### ä½¿ç”¨Supervisorè¿›ç¨‹ç®¡ç†
```ini
[program:dataask]
command=/opt/dataask/venv/bin/python app.py
directory=/opt/dataask
user=dataask
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/dataask.log
```

#### ä½¿ç”¨Dockeréƒ¨ç½²
```dockerfile
FROM python:3.9-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .
EXPOSE 8080

CMD ["python", "app.py"]
```

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### åº”ç”¨æ—¥å¿—
- ä½ç½®ï¼š`app.log`
- çº§åˆ«ï¼šINFO, WARNING, ERROR
- è½®è½¬ï¼šè‡ªåŠ¨æŒ‰å¤§å°è½®è½¬

### æ€§èƒ½ç›‘æ§
- APIå“åº”æ—¶é—´
- æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
- Redisç¼“å­˜å‘½ä¸­ç‡
- Licenseä½¿ç”¨æƒ…å†µ

### å¥åº·æ£€æŸ¥
```bash
# æ£€æŸ¥åº”ç”¨çŠ¶æ€
curl http://localhost:8080/api/v1/health

# æ£€æŸ¥LicenseçŠ¶æ€
curl http://localhost:8080/api/v1/license/status
```

## ğŸ¤ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
DataAsk/
â”œâ”€â”€ app.py                 # åº”ç”¨ä¸»å…¥å£
â”œâ”€â”€ config.py              # é…ç½®ç®¡ç†
â”œâ”€â”€ requirements.txt       # ä¾èµ–æ¸…å•
â”œâ”€â”€ env.example           # ç¯å¢ƒé…ç½®æ¨¡æ¿
â”œâ”€â”€ deploy.sh             # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ api/                  # APIè·¯ç”±
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ routes.py
â”œâ”€â”€ services/             # æ ¸å¿ƒæœåŠ¡
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ database.py       # æ•°æ®åº“æœåŠ¡
â”‚   â”œâ”€â”€ redis_service.py  # RedisæœåŠ¡
â”‚   â””â”€â”€ vanna_service.py  # AIæœåŠ¡
â”œâ”€â”€ middleware/           # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ license_middleware.py  # Licenseä¸­é—´ä»¶
â””â”€â”€ README.md
```

### è´¡çŒ®æŒ‡å—
1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. æäº¤Pull Request

### ç¼–ç è§„èŒƒ
- éµå¾ªPEP 8 Pythonç¼–ç è§„èŒƒ
- ä½¿ç”¨ä¸­æ–‡æ³¨é‡Šå’Œæ–‡æ¡£
- ç¼–å†™å•å…ƒæµ‹è¯•
- ä¿æŒä»£ç ç®€æ´å¯è¯»

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. LicenseéªŒè¯å¤±è´¥
```bash
# æ£€æŸ¥Licenseæ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la license.key

# å¦‚æœæ²¡æœ‰Licenseæ–‡ä»¶ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…è·å–
# Licenseç®¡ç†å·¥å…·å•ç‹¬æä¾›ï¼Œä¸åŒ…å«åœ¨å¼€æºä»£ç ä¸­
```

#### 2. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
systemctl status mysql

# æµ‹è¯•è¿æ¥
mysql -h localhost -u dataask -p llmstudy
```

#### 3. Redisè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥RedisçŠ¶æ€
systemctl status redis

# æµ‹è¯•è¿æ¥
redis-cli ping
```

#### 4. AIæ¨¡å‹è°ƒç”¨å¤±è´¥
- æ£€æŸ¥API Keyé…ç½®
- éªŒè¯ç½‘ç»œè¿æ¥
- æŸ¥çœ‹é”™è¯¯æ—¥å¿—

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f app.log

# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
journalctl -u dataask -f

# æŸ¥çœ‹Nginxæ—¥å¿—
tail -f /var/log/nginx/access.log
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [Vanna AI](https://vanna.ai/) - æ™ºèƒ½SQLç”Ÿæˆ
- [é˜¿é‡Œäº‘ç™¾ç‚¼](https://bailian.aliyun.com/) - AIæ¨¡å‹æœåŠ¡
- [ChromaDB](https://www.trychroma.com/) - å‘é‡æ•°æ®åº“
- [Flask](https://flask.palletsprojects.com/) - Webæ¡†æ¶

## ğŸ“ è”ç³»æˆ‘ä»¬

- ğŸ“§ é‚®ç®±ï¼šsupport@dataask.com
- ğŸŒ å®˜ç½‘ï¼šhttps://dataask.com
- ğŸ“± å¾®ä¿¡ï¼šDataAsk2024

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼ 