<div class="alain-default__content-title">
  <h1>
    AI监控大屏
    <small>欢迎！</small>
  </h1>
</div>

<div nz-row nzGutter="16">
  <div nz-col nzXs="24" nzSm="12" nzMd="6" class="mb-md">
    <div nz-row nzType="flex" nzAlign="middle" class="bg-primary rounded-md">
      <div nz-col nzSpan="12" class="p-md text-white">
        <div class="h2 mt0">123,456</div>
        <p class="text-nowrap mb0">网站流量</p>
      </div>
      <div nz-col nzSpan="12">
        @if (webSite) {
          <g2-mini-bar
            height="35"
            color="#fff"
            borderWidth="3"
            [padding]="[5, 30]"
            [data]="webSite"
            tooltipType="mini"
            (ready)="fixDark($event)"
          />
        }
      </div>
    </div>
  </div>
  <div nz-col nzXs="24" nzSm="12" nzMd="6" class="mb-md">
    <div nz-row nzType="flex" nzAlign="middle" class="bg-success rounded-md">
      <div nz-col nzSpan="12" class="p-md text-white">
        <div class="h2 mt0">234,567K</div>
        <p class="text-nowrap mb0">页面印象</p>
      </div>
      <div nz-col nzSpan="12">
        @if (webSite) {
          <g2-mini-bar
            height="35"
            color="#fff"
            borderWidth="3"
            [padding]="[5, 30]"
            [data]="webSite"
            tooltipType="mini"
            (ready)="fixDark($event)"
          />
        }
      </div>
    </div>
  </div>
  <div nz-col nzXs="24" nzSm="12" nzMd="6" class="mb-md">
    <div nz-row nzType="flex" nzAlign="middle" class="bg-orange rounded-md">
      <div nz-col nzSpan="12" class="p-md text-white">
        <div class="h2 mt0">¥458,778</div>
        <p class="text-nowrap mb0">总销售额</p>
      </div>
      <div nz-col nzSpan="12">
        @if (webSite) {
          <g2-mini-bar
            height="35"
            color="#fff"
            borderWidth="3"
            [padding]="[5, 30]"
            [data]="webSite"
            tooltipType="mini"
            (ready)="fixDark($event)"
          />
        }
      </div>
    </div>
  </div>
  <div nz-col nzXs="24" nzSm="12" nzMd="6" class="mb-md">
    <div nz-row nzType="flex" nzAlign="middle" class="bg-magenta rounded-md">
      <div nz-col nzSpan="12" class="p-md text-white">
        <div class="h2 mt0">456</div>
        <p class="text-nowrap mb0">支持工单</p>
      </div>
      <div nz-col nzSpan="12">
        @if (webSite) {
          <g2-mini-bar
            height="35"
            color="#fff"
            borderWidth="3"
            [padding]="[5, 30]"
            [data]="webSite"
            tooltipType="mini"
            (ready)="fixDark($event)"
          />
        }
      </div>
    </div>
  </div>
</div>
<div nz-row nzGutter="16">
  <div nz-col nzXs="24" nzMd="12">
    <nz-card [nzBordered]="false" [nzTitle]="salesTitle">
      <ng-template #salesTitle>
        销售统计
        <small class="text-sm font-weight-normal">业务预期与零售销售统计</small>
      </ng-template>
      @if (salesData) {
        <g2-bar height="275" [data]="salesData" />
      }
    </nz-card>
  </div>
  <div nz-col nzXs="24" nzMd="12">
    <nz-card [nzTitle]="growthTitle" [nzBordered]="false">
      <ng-template #growthTitle>
        增长率
        <small class="text-sm font-weight-normal">业务预期与零售销售统计</small>
      </ng-template>
      @if (offlineChartData) {
        <g2-timeline [data]="offlineChartData" [height]="289" [titleMap]="{ y1: '客流量', y2: '支付笔数' }" />
      }
    </nz-card>
  </div>
</div>
<div nz-row nzGutter="16">
  <div nz-col nzXs="24" nzMd="12">
    <nz-card [nzBordered]="false" [nzCover]="coverTpl">
      <ng-template #coverTpl>
        <img 
          class="img" 
          src="//os.alipayobjects.com/rmsportal/GhjqstwSgxBXrZS.png" 
          style="width: 100%; height: 200px; object-fit: cover;"
          alt="洞察魔方"
          loading="lazy"
        />
      </ng-template>
      <h3>洞察魔方</h3>
      <p class="text-grey">智能数据分析平台</p>
      <ol class="list-styled text-lg pt-md">
        <li>基于AI技术的智能数据问答系统，让数据分析更加简单高效。</li>
        <li>为企业级数据分析场景提供完整的解决方案和最佳实践。</li>
        <li>多种灵活的分析工具和可视化组件，提升数据洞察能力。</li>
      </ol>
      <p class="pt-md mb0">
        <a class="text-grey" href="#" target="_blank">了解更多...</a>
      </p>
    </nz-card>
  </div>
  <div nz-col nzXs="24" nzMd="12">
    <nz-card [nzTitle]="recentTitle" [nzBordered]="false" class="ant-card__body-nopadding">
      <ng-template #recentTitle>
        最近文章
        <small class="text-sm font-weight-normal">最新发布的文章内容</small>
      </ng-template>
      @for (item of todoData; track $index) {
        <div nz-row [nzJustify]="'center'" [nzAlign]="'middle'" class="py-sm pr-md bg-grey-lighter-h point">
          <div nz-col [nzSpan]="4" class="text-center">
            <nz-avatar [nzSrc]="'./assets/tmp/img/' + item.avatar + '.png'" />
          </div>
          <div nz-col [nzSpan]="20">
            <strong>{{ item.name }}</strong>
            <p class="mb0">{{ item.content }}</p>
          </div>
        </div>
      }
    </nz-card>
  </div>
  <div nz-col nzXs="24" nzMd="12">
    <nz-card nzTitle="待办事项" [nzBordered]="false" class="ant-card__body-nopadding">
      @for (item of todoData; track $index) {
        <div nz-row [nzJustify]="'center'" [nzAlign]="'middle'" class="py-sm pr-md bg-grey-lighter-h point">
          <div nz-col [nzSpan]="4" class="text-center">
            <nz-avatar [nzSrc]="'./assets/tmp/img/' + item.avatar + '.png'" />
          </div>
          <div nz-col [nzSpan]="18">
            <strong>{{ item.name }}</strong>
            <p [class.text-deleted]="item.completed" class="mb0">{{ item.content }}</p>
          </div>
          <div nz-col [nzSpan]="2" class="text-right pr-md">
            <i nz-dropdown [nzDropdownMenu]="todoMenus" nzPlacement="topRight" nz-icon nzType="ellipsis" class="rotate-90"></i>
            <nz-dropdown-menu #todoMenus="nzDropdownMenu">
              <ul nz-menu>
                @if (item.completed) {
                  <li nz-menu-item (click)="item.completed = false">激活</li>
                } @else {
                  <li nz-menu-item (click)="item.completed = true">完成</li>
                }
                <li nz-menu-item (click)="todoData.splice(todoData.indexOf(item), 1)">删除</li>
              </ul>
            </nz-dropdown-menu>
          </div>
        </div>
      }
    </nz-card>
  </div>
</div>
